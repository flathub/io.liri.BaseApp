id: io.liri.BaseApp
branch: "5.11"
runtime: org.kde.Platform
sdk: org.kde.Sdk
runtime-version: "5.11"
separate-locales: false
modules:
  - name: qbs
    sources:
      - type: archive
        url: http://download.qt.io/official_releases/qbs/1.11.0/qbs-src-1.11.0.tar.gz
        sha256: 6ce30c468e688f6843468324a34a7191409b471c3ff6f3e834ef8bfa7b3467cd
      - type: patch
        path: patches/qbs-fileinfo-exists.patch
      - type: script
        dest-filename: configure
        commands:
          - qmake QBS_INSTALL_PREFIX=/app CONFIG+=qbs_enable_project_file_updates qbs.pro

  - name: qbs-shared
    buildsystem: simple
    build-commands:
      - qbs setup-toolchains --settings-dir .qbs-settings --type gcc /usr/bin/g++ gcc
      - qbs setup-qt --settings-dir .qbs-settings /usr/bin/qmake qt5
      - qbs config --settings-dir .qbs-settings profiles.qt5.baseProfile gcc
      - qbs config --settings-dir .qbs-settings --list
      - qbs --settings-dir .qbs-settings -d build --command-echo-mode command-line profile:qt5 qbs.buildVariant:debug modules.qbs.installRoot:/ project.prefix:/app
    sources:
      - type: archive
        url: https://github.com/lirios/qbs-shared/releases/download/v1.4.0/liri-qbs-shared-1.4.0.tar.xz
        sha256: 2b15c8e9ab5ef638bbc22cff6b077df98ff0546ca7192a7574e7e3e30adc4365

  - name: fluid
    buildsystem: simple
    build-commands:
      - qbs setup-toolchains --settings-dir .qbs-settings --type gcc /usr/bin/g++ gcc
      - qbs setup-qt --settings-dir .qbs-settings /usr/bin/qmake qt5
      - qbs config --settings-dir .qbs-settings profiles.qt5.baseProfile gcc
      - qbs config --settings-dir .qbs-settings --list
      - qbs --settings-dir .qbs-settings -d build --command-echo-mode command-line profile:qt5 qbs.buildVariant:debug modules.qbs.installRoot:/ modules.lirideployment.prefix:/app project.useSystemQbsShared:true project.withDocumentation:false
    sources:
      - type: archive
        url: https://github.com/lirios/fluid/releases/download/v1.1.0/fluid-1.1.0.tar.xz
        sha256: 3f7d6ed5bc986878134c28bd1f78848a30494ad790863adaffbdc8b3fb73b1a6
